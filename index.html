

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treasure Hunt Leaderboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .leaderboard {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        td {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .rank {
            font-weight: bold;
            font-size: 1.2rem;
            text-align: center;
            width: 80px;
        }
        
        .top-3 {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 215, 0, 0.1));
        }
        
        .name {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, #74ebd5, #9face6);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        /* .level and .level-number styles removed */
        
        .points {
            text-align: right;
            font-weight: bold;
            color: gold;
            font-size: 1.2rem;
        }
        
        .last-updated {
            text-align: center;
            opacity: 0.7;
            font-size: 0.9rem;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            th, td {
                padding: 15px 10px;
            }
            
            .rank {
                width: 50px;
            }
        }
        
        @media (max-width: 480px) {
            th, td {
                padding: 12px 8px;
                font-size: 0.9rem;
            }
            
            .avatar {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .level-number, .points {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Treasure Hunt Leaderboard</h1>
            <p class="subtitle">Top 10 Teams - First to complete gets bonus points!</p>
        </header>
        
        <div class="leaderboard">
            <table>
                <thead>
                    <tr>
                        <th class="rank">Rank</th>
                        <th class="name">Team Name</th>
                        <!-- <th class="level">Level</th> -->
                        <th class="points">Points</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body">
                    <!-- Leaderboard data will be populated here -->
                </tbody>
            </table>
        </div>
        
        <p class="last-updated">Last updated: <span id="update-time"></span></p>
    </div>

    <script>
        // Hardcoded teams array in the user's specified order with points assigned
        // Each team has an array of level submissions (order matters)
        let teams = [
            { id: 1, name: "NOVA", avatar: "NO", levels: [] },
            { id: 2, name: "Cryptchasers", avatar: "CR", levels: [] },
            { id: 3, name: "Enigma explorers", avatar: "EE", levels: [] },
            { id: 4, name: "The Vampire", avatar: "TV", levels: [] },
            { id: 5, name: "mystery finders", avatar: "MF", levels: [] },
            { id: 6, name: "Hawk Eyes", avatar: "HE", levels: [] },
            { id: 7, name: "Seek Quel", avatar: "SQ", levels: [] },
            { id: 8, name: "Mystic hunters", avatar: "MH", levels: [] },
            { id: 9, name: "Coin chasers", avatar: "CC", levels: [] },
            { id: 10, name: "Dominators", avatar: "DO", levels: [] },
            { id: 11, name: "Treasure seekers", avatar: "TS", levels: [] },
            { id: 12, name: "Sneaky seekers", avatar: "SS", levels: [] },
            { id: 13, name: "Zephyr", avatar: "ZE", levels: [] }
        ];

        // Provided group submissions for level 1 (first occurrence only, ignore not in teams)
        const groupSubmissionsRaw1 = [
            "NOVA","NOVA","Nova","NOVA","Cryptchasers","Enigma explorers","The Vampire","NOVA","Mystery finders","Noah","Nova","NOVA","Nova","NOVA","NOVA","Hawk Eyes","Seek Quel","Mystic hunters","Coin chasers","Dominators","Treasure seekers","Coin chasers","Coin chasers","Coin chasers","Cryptchasers","Cryptchasers","Mystic hunterz","Coin chasers","Coin chasers","Coin seekers","Sneaky seekers","Treasure seekers","Sneaky seekers","Treasure Seekers","Cryptchasers","Cryptchasers","Cryptchasers","Sneky seekers","Cryptchasers","Zephyr","Treasure seekers","Coin chasers","Coin seekers","Coin chasers","Treasure seekers","Coin seekers","DOMINATORS","Sneaky seekers","Sneaky seekers","The clue-less","Clue crsaders","Treasure seekers","Sneaky seekers","Treasure seekers","Cryptchasers","Cryptchasers","Cryptchasers","Cryptchasers","Coin chasers","Sneaky seekers","The Vampire","The Clue-less","Hawk eyes","The clue less","Vampire","Tresure seekers","The clue less","Dominators","Mystic hunterz","Hawk eyes","Mystic hunterz","Sneaky seekers","The clue-less","Vampire","The Vampire","sviluppatori segreti","InnoQuest","InnoQuest","Vampire","InnoQuest","InnoQuest","Treasure seekers","Cryptchasers","looters","Vampire","N","Sviluppatori segreti","Looters","Innoquest","Sneaky seekers","Mystery finders","Mystery finders","Looters","Looters","Vampire","Mystic hunterz","Looters","Treasure seekers","Sneaky seekers","looters","Hawk eyes","Hawk eyes","The Vampire","InnoQuest","Thr clue less",".","Treasure seekers","The Clue-less","Cryptchasers","Test123","Looters",".","Innoquest","Cryptchasers","sviluppatori segreti","The Vampire","NOVA","Looters","Treasure seekers","Hawk eyes","The vampire","Sviluppatori segreti",".","Looters","Innoquest","The clue less","InnoQuest","Svillupattori segreti","sviluppatori segreti","Test","Looters","Clue crusaders","NOVA","Looters","Mystery finders","InnoQuest","InnoQuest","InnoQuest","Test123","Looters","Nova","Test123","Clash of Clues","Clash of Clues","NOVA","Test123","InnoQuest","Test","InnoQuest","Enigma explorers","The Vampire"
        ];
        // Provided group submissions for level 2 (first occurrence only, ignore not in teams)
        const groupSubmissionsRaw2 = [
            "Mystery finders","Dominators","Coin chasers","Coin seekers","Mystic hunterz","Zephyr","Sneaky seekers","Hawk eyes","Cryptchasers","Looters","nova","Clue crsaders"
        ];

        // Normalize function for matching
        function normalize(name) {
            return name.trim().toLowerCase().replace(/[^a-z0-9 ]/g, "");
        }

        // Build a map of team names for fast lookup
        const teamNameMap = {};
        teams.forEach((team, idx) => {
            teamNameMap[normalize(team.name)] = idx;
        });

        // Track first occurrence only for level 1
        const seen1 = new Set();
        groupSubmissionsRaw1.forEach((grp) => {
            const norm = normalize(grp);
            if (teamNameMap.hasOwnProperty(norm) && !seen1.has(norm)) {
                teams[teamNameMap[norm]].levels = [1]; // Mark level 1 as completed
                seen1.add(norm);
            }
        });

        // Track first occurrence only for level 2
        const seen2 = new Set();
        groupSubmissionsRaw2.forEach((grp) => {
            const norm = normalize(grp);
            if (teamNameMap.hasOwnProperty(norm) && !seen2.has(norm)) {
                // If already has level 1, add level 2; else, set to [2]
                const lvls = teams[teamNameMap[norm]].levels;
                if (lvls.length === 0) {
                    teams[teamNameMap[norm]].levels = [2];
                } else if (!lvls.includes(2)) {
                    teams[teamNameMap[norm]].levels.push(2);
                }
                seen2.add(norm);
            }
        });

        // For each level, assign points based on submit order
        function calculatePoints(teams, numLevels = 3, fullPoints = 100) {
            // For each level, determine the order of submission
            let levelOrders = Array.from({length: numLevels}, (_, i) => []);
            teams.forEach((team, tIdx) => {
                team.levels.forEach((level, lIdx) => {
                    // level-1 for 0-based index
                    levelOrders[level-1].push({ teamIdx: tIdx, order: lIdx });
                });
            });
            // For each level, sort by order (simulate submission order)
            let levelPoints = Array.from({length: teams.length}, () => Array(numLevels).fill(0));
            for (let lvl = 0; lvl < numLevels; lvl++) {
                // Sort by order (lower order = earlier submit)
                let orderArr = levelOrders[lvl].sort((a, b) => a.order - b.order);
                orderArr.forEach((entry, idx) => {
                    let points = 0;
                    if (idx === 0) points = fullPoints;
                    else if (idx < 4) points = fullPoints - 10 * idx;
                    else if (idx < 6) points = fullPoints - 10 * 3 - 15 * (idx - 3);
                    else points = fullPoints - 10 * 3 - 15 * 2 - 20 * (idx - 5);
                    if (points < 75) points = 75;
                    levelPoints[entry.teamIdx][lvl] = points;
                });
            }
            // Sum up total points for each team
            return teams.map((team, idx) => {
                const total = levelPoints[idx].reduce((a, b) => a + b, 0);
                return { ...team, points: total };
            });
        }

        teams = calculatePoints(teams);

        function updateLeaderboard() {
            const tbody = document.getElementById('leaderboard-body');
            tbody.innerHTML = '';
            // Sort by points descending
            const sortedTeams = [...teams].sort((a, b) => b.points - a.points);
            const topTeams = sortedTeams.slice(0, 10);
            topTeams.forEach((team, index) => {
                const rank = index + 1;
                const row = document.createElement('tr');
                if (rank <= 3) {
                    row.classList.add('top-3');
                }
                row.innerHTML = `
                    <td class="rank">${rank}</td>
                    <td class="name">
                        <div class="avatar">${team.avatar}</div>
                        ${team.name}
                    </td>
                    <td class="points">${team.points}</td>
                `;
                tbody.appendChild(row);
            });
            document.getElementById('update-time').textContent = new Date().toLocaleTimeString();
        }

        // Initial update
        updateLeaderboard();
    </script>
</body>
</html>